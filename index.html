<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lorn Jaeger's Webpage</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "Georgia", "Times New Roman", serif;
      background: #e6e6e6;
      overflow-x: hidden;
    }

    .site {
      max-width: 900px;
      width: 100%;
      margin: 0 auto 0 0;
      background: #fdfdfd;
    }

    header {
      margin: 0;
      padding: 0;
      width: 100%;
      max-width: 100%;
      box-sizing: border-box;
      color: #000;
      overflow: hidden;
      background: #fdfdfd;
      position: relative;
      border: 4px double #000;
    }

    .hero-img {
      display: block;
      width: 100%;
      max-width: 100%;
      height: auto;
      object-fit: contain;
      object-position: center;
      border: 1px solid #000;
      box-sizing: border-box;
    }

    .hero-overlay {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: clamp(1rem, 4vw, 3rem);
      padding: clamp(0.75rem, 2vw, 1.5rem) clamp(1rem, 3vw, 2rem);
      pointer-events: none;
      box-sizing: border-box;
    }

    .hero-overlay::before {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0) 55%, rgba(255, 255, 255, 0.18) 85%, rgba(255, 255, 255, 0.28) 100%);
      pointer-events: none;
    }

    .overlay-box {
      position: relative;
      z-index: 1;
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
      font-size: clamp(0.75rem, 1.6vw, 0.95rem);
      font-weight: 400;
      color: #000;
      text-shadow: 0 0 6px rgba(255, 255, 255, 0.7);
      pointer-events: auto;
    }

    .overlay-left {
      text-align: left;
      align-items: flex-start;
      white-space: nowrap;
    }

    .overlay-right {
      text-align: right;
      align-items: flex-end;
      white-space: nowrap;
    }

    nav {
      margin: 0;
      padding: 0;
      border: none;
      text-align: left;
      display: flex;
      gap: 0.25rem;
      flex-wrap: nowrap;
      white-space: nowrap;
    }

    .title-name {
      text-decoration: underline;
      font-weight: 700;
    }

    .page {
      position: relative;
      display: flex;
      align-items: stretch;
      gap: 0.5rem;
      padding: 0;
      border: 1px solid #000;
      border-top: 0;
      box-sizing: border-box;
      overflow: hidden;
      min-height: 100%;
    }

    .sidebar {
      width: clamp(100px, 26vw, 135px);
      border: 0;
      border-right: 1px solid #000;
      padding: 0.45rem;
      display: flex;
      flex-direction: column;
      gap: 0.7rem;
      font-size: 0.65rem;
      box-sizing: border-box;
      flex: 0 0 auto;
      align-self: stretch;
    }

    .sidebar-section h2 {
      margin: 0 0 0.25rem 0;
      font-size: 0.9rem;
      text-decoration: underline;
    }

    .sidebar-section ul {
      list-style: none;
      padding: 0;
      margin: 0;
      display: flex;
      flex-direction: column;
      gap: 0.15rem;
      font-size: 0.72rem;
    }

    .sidebar-section li {
      line-height: 1.2;
    }

    .inline-cloud {
      display: flex;
      flex-wrap: wrap;
      gap: 0.12rem 0.12rem;
      font-size: 0.72rem;
    }

    .inline-cloud span {
      white-space: nowrap;
    }

    .main-content {
      flex: 1 1 auto;
      min-width: 0;
      max-width: min(72ch, 100%);
      padding: clamp(1rem, 2vw, 2rem);
      box-sizing: border-box;
    }

    .post-card {
      border-bottom: 1px solid #000;
      padding-bottom: 1rem;
      margin-bottom: 1rem;
      overflow: hidden;
    }

    .post-card h3 {
      margin: 0 0 0.2rem 0;
      font-size: 0.95rem;
      text-decoration: underline;
    }

    .post-meta {
      margin: 0 0 0.4rem 0;
      font-size: 0.78rem;
      opacity: 0.8;
    }

    .post-card img {
      width: 100%;
      max-width: 520px;
      height: auto;
      display: block;
      margin: 0.5rem 0;
      border: 1px solid #000;
    }

    .post-card p {
      margin: 0.25rem 0;
      line-height: 1.4;
      font-size: 0.93rem;
    }

    @media (max-width: 720px) {
      .page {
        flex-direction: row;
        gap: 0.5rem;
      }

      .sidebar {
        width: clamp(100px, 38vw, 130px);
        padding: clamp(0.3rem, 2vw, 0.65rem);
      }

      .main-content {
        max-width: min(72ch, 100%);
        padding: clamp(0.75rem, 2vw, 1.5rem);
      }
    }

    .sidebar-toggle {
      background: transparent;
      border: 1px solid #000;
      padding: 0.1rem 0.3rem;
      font-family: inherit;
      font-size: 0.75rem;
      line-height: 1;
      cursor: pointer;
      margin: 0 0 0.35rem 0;
      align-self: flex-start;
    }

    .page.sidebar-hidden .sidebar {
      display: none;
    }

    .page.sidebar-hidden .main-content {
      max-width: min(90ch, 100%);
      flex: 1 1 100%;
    }

  </style>
</head>
  <body>
    <div class="site">
      <header>
        <img src="parthenon-glitch.webp" alt="Glitched Parthenon" class="hero-img">
        <div class="hero-overlay">
          <div class="overlay-box overlay-left">
            <nav aria-label="Primary">
              <a href="index.html">home</a> //
              <a href="projects.html">projects</a> //
              <a href="about.html">about</a> //
              <a href="contact.html">contact</a> //
              <a href="contact.html">code</a>
            </nav>
          </div>
          <div class="overlay-box overlay-right">
            <span class="title-name">Lorn's Webpage</span>
            <span id="clock">--:--:-- -- in Missoula MT</span>
            <span id="requests">0 requests today</span>
            <span id="server-ip">Server: --</span>
          </div>
        </div>
      </header>

      <div class="page" id="page">
      <aside class="sidebar" aria-label="Sidebar">
        <button class="sidebar-toggle" id="toggle-sidebar" type="button" aria-label="Toggle sidebar">▼</button>
        <section class="sidebar-section" id="posts">
          <h2>Recommended</h2>
          <ul>
            <li>Glitch Studies</li>
            <li>Minimal Web</li>
            <li>Small Tools</li>
            <li>Quiet UX</li>
            <li>Walkable Code</li>
          </ul>
        </section>

        <section class="sidebar-section" id="archives">
          <h2>Archives</h2>
          <div class="inline-cloud">
            <span>2024-12</span><span>2024-11</span><span>2024-10</span><span>2024-09</span><span>2024-08</span><span>2024-07</span>
            <span>2024-06</span><span>2024-05</span><span>2024-04</span><span>2024-03</span><span>2024-02</span><span>2024-01</span>
          </div>
        </section>

        <section class="sidebar-section" id="tags">
          <h2>Tags</h2>
          <div class="inline-cloud">
            <span>#glitch</span><span>#maps</span><span>#ux</span><span>#hardware</span>
            <span>#writing</span><span>#deploys</span><span>#hiking</span><span>#radio</span>
            <span>#photos</span><span>#notes</span>
          </div>
        </section>

      </aside>

      <main class="main-content" id="blog">
        <div id="posts-container">
          <p>Loading posts...</p>
        </div>
      </main>
    </div>

  <script>
    const STORAGE_KEY = "lorn_request_counter";

    function getMissoulaDateParts() {
      const options = { timeZone: "America/Denver", year: "numeric", month: "2-digit", day: "2-digit" };
      const dateString = new Intl.DateTimeFormat("en-US", options).format(new Date());
      const [m, d, y] = dateString.split("/");
      return { y, m, d };
    }

    function todayKey() {
      const { y, m, d } = getMissoulaDateParts();
      return `${y}-${m}-${d}`;
    }

    function updateClock() {
      const options = {
        timeZone: "America/Denver",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit",
        hour12: true
      };
      const t = new Intl.DateTimeFormat("en-US", options).format(new Date());
      document.getElementById("clock").textContent = t + " in Missoula MT";
    }

    function updateRequests() {
      const key = todayKey();
      let data;

      try { data = JSON.parse(localStorage.getItem(STORAGE_KEY)); }
      catch { data = null; }

      if (!data || data.date !== key) data = { date: key, count: 0 };
      data.count++;
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));

      const label = data.count === 1 ? "request" : "requests";
      document.getElementById("requests").textContent = `${data.count} ${label} today`;
    }

    function updateServerIp() {
      const host = window.location.hostname || "localhost";
      document.getElementById("server-ip").textContent = `${host}`;
    }

    document.addEventListener("DOMContentLoaded", () => {
      updateClock();
      setInterval(updateClock, 1000);
      updateRequests();
      updateServerIp();

      const pageEl = document.getElementById("page");
      const toggleBtn = document.getElementById("toggle-sidebar");
      if (pageEl && toggleBtn) {
        toggleBtn.addEventListener("click", () => {
          const hidden = pageEl.classList.toggle("sidebar-hidden");
          toggleBtn.textContent = hidden ? "▲" : "▼";
        });
      }

      fetch("generated/posts.html")
        .then((resp) => resp.ok ? resp.text() : Promise.reject(resp.status))
        .then((html) => {
          const target = document.getElementById("posts-container");
          if (target) target.innerHTML = html;
        })
        .catch(() => {
          const target = document.getElementById("posts-container");
          if (target) target.innerHTML = "<p>No posts built yet. Run <code>python build.py</code> to generate.</p>";
        });
    });
  </script>
  </body>
</html>
